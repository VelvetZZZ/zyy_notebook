# ğŸ§  Python å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼ˆString Representationsï¼‰

åœ¨ Python ä¸­ï¼Œå¯¹è±¡å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²å½¢å¼æ¥è¡¨è¾¾è‡ªå·±çš„å«ä¹‰ã€‚è¿™ç§è¡¨è¾¾ä¸ä»…æ˜¯ä¸ºäº†è¾“å‡ºä¿¡æ¯ï¼Œä¹Ÿæ–¹ä¾¿äººç±»é˜…è¯»å’Œè°ƒè¯•ç¨‹åºã€‚

## ğŸ” ä¸ºä»€ä¹ˆå­—ç¬¦ä¸²è¡¨ç¤ºå¾ˆé‡è¦ï¼Ÿ

- å­—ç¬¦ä¸²æ˜¯è¿æ¥**ç¨‹åºä¸äººç±»**çš„æ¡¥æ¢ã€‚
- ä¸€ä¸ªå¯¹è±¡å¦‚æœèƒ½æ­£ç¡®åœ°è¡¨ç°è‡ªå·±ï¼Œä¼šä½¿å¾—è°ƒè¯•ä¸é˜…è¯»å˜å¾—æ›´åŠ æ¸…æ™°ã€‚

## âœŒï¸ ä¸¤ç§å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼

| è¡¨ç¤ºæ–¹å¼ | æ–¹æ³•å        | é€‚ç”¨å¯¹è±¡      | è¯´æ˜                  |
|----------|---------------|---------------|-----------------------|
| `str()`  | `__str__()`   | äººç±»ç”¨æˆ·       | é¢å‘ç”¨æˆ·çš„å‹å¥½æè¿°     |
| `repr()` | `__repr__()`  | å¼€å‘è€… & è§£é‡Šå™¨ | é¢å‘å¼€å‘è€…çš„ç²¾ç¡®è¡¨è¾¾   |

---

## ğŸ§ª ç¤ºä¾‹ä»£ç ï¼š

```python
class Dog:
    def __init__(self, name):
        self.name = name

    def __str__(self):
        return f"A dog named {self.name}"

    def __repr__(self):
        return f"Dog('{self.name}')"

d = Dog("Choco")

print(str(d))   # è¾“å‡º: A dog named Choco
print(repr(d))  # è¾“å‡º: Dog('Choco')
```
åœºæ™¯           ä½¿ç”¨æ–¹æ³•
print(obj)    è°ƒç”¨ str() ï¼ˆæ›´ç¾è§‚ï¼‰
objï¼ˆè§£é‡Šå™¨ä¸­ï¼‰ è°ƒç”¨ repr() ï¼ˆæ›´ç²¾ç¡®ï¼‰


# The repr String for an Objectï¼ˆrepr()å­—ç¬¦ä¸²è¡¨ç¤ºï¼‰
## ğŸ”¹ ä»€ä¹ˆæ˜¯ repr()ï¼Ÿ
repr(object) è¿”å›ä¸€ä¸ª å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²åº”å½“å°½å¯èƒ½æ˜¯ä¸€ä¸ª å¯ä»¥è¢« eval() æ‰§è¡Œå¹¶è¿˜åŸå‡ºåŸå¯¹è±¡çš„ Python è¡¨è¾¾å¼ã€‚

```python
eval(repr(obj)) == obj   # é€šå¸¸æˆç«‹
```
## ğŸ” ç”¨é€”
â€¢	è°ƒè¯•ä¸ºä¸»ï¼Œç”¨äºç²¾ç¡®ã€æ­£å¼åœ°è¡¨ç¤ºå¯¹è±¡ã€‚
â€¢	äº¤äº’å¼è§£é‡Šå™¨ï¼ˆæ¯”å¦‚ç›´æ¥è¿è¡Œ Python å‘½ä»¤è¡Œï¼‰ä¸­é»˜è®¤ç”¨ repr() æ˜¾ç¤ºç»“æœã€‚

## âš ï¸ æ³¨æ„äº‹é¡¹
â€¢	å¹¶ä¸æ˜¯æ‰€æœ‰å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªâ€œèƒ½è¢« eval è¿˜åŸâ€çš„ repr è¡¨è¾¾å¼ã€‚
ä¾‹å¦‚å†…ç½®å‡½æ•°ï¼š
```python
>>> repr(min)
'<built-in function min>'
```
è¿™æ˜¯ Python èƒ½è¡¨ç¤º min çš„æ–¹æ³•ï¼Œä½†å¹¶ä¸èƒ½ç”¨ eval() æ¥è¿˜åŸå‡ºè¿™ä¸ªå¯¹è±¡ã€‚

### ğŸ§ ä»€ä¹ˆæ˜¯eval()å‡½æ•°ï¼Ÿ
eval() æ˜¯ Python çš„ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œå…¨åæ˜¯ï¼š
```python
eval(expression_string)
```
å®ƒçš„ä½œç”¨æ˜¯ï¼š
æŠŠä¸€ä¸ªâ€œå­—ç¬¦ä¸²è¡¨è¾¾å¼â€å½“æˆ Python ä»£ç æ‰§è¡Œï¼Œå¹¶è¿”å›ç»“æœã€‚

### ğŸ§ é‚£ repr() å’Œå®ƒæœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ
repr() çš„èŒè´£å°±æ˜¯ï¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼Œè¿™ä¸ªè¡¨è¾¾å¼â€œç†æƒ³æƒ…å†µä¸‹â€å¯ä»¥äº¤ç»™ eval() æ¥è¿˜åŸå‡ºåŸå¯¹è±¡ã€‚
```python
eval(repr(x)) == x  âœ…  # é€šå¸¸æˆç«‹
```
###  ğŸ§ print(repr(12e12)) æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ
1.	12e12 æ˜¯ç§‘å­¦è®¡æ•°æ³•ï¼Œç­‰äº 12 * 10^12ï¼Œä¹Ÿå°±æ˜¯ 12000000000000.0ã€‚
2.	repr(12e12) ç”Ÿæˆè¿™ä¸ªæ•°å­—çš„â€œå‡†ç¡®å­—ç¬¦ä¸²è¡¨ç¤ºâ€ï¼š
* Python ç”¨ eï¼ˆæˆ– Eï¼‰æ¥è¡¨ç¤ºâ€œÃ—10 çš„å¤šå°‘æ¬¡æ–¹â€

###  ç¯å¢ƒè¾“å‡ºå·®å¼‚è§£é‡Š
â€¢print(str(obj))ï¼šæ˜¾ç¤ºå­—ç¬¦ä¸²å†…å®¹ï¼Œä¸å¸¦å¼•å·
â€¢str(obj) ç›´æ¥åœ¨ è§£é‡Šå™¨é‡Œæ•²ï¼Œå¯èƒ½ä¼šé€šè¿‡ repr() è‡ªåŠ¨æ˜¾ç¤ºï¼Œå¸¦å¼•å·
â€¢repr(str(obj))ï¼šä¼šæ˜ç¡®æ˜¾ç¤ºå¼•å·ï¼Œè¡¨ç¤ºæ˜¯å­—ç¬¦ä¸²æœ¬èº«ã€‚


# â“ VS Code ä¸­ä¸ºä»€ä¹ˆå¿…é¡»ç”¨ `print()` æ‰èƒ½çœ‹åˆ°è¾“å‡ºï¼Ÿ

---

## ğŸ§  1. åŒºåˆ«åœ¨äºã€Œç¯å¢ƒã€

| ç¯å¢ƒ              | è¾“å‡ºè¡Œä¸º                                  |
|-------------------|-------------------------------------------|
| Python è§£é‡Šå™¨ / REPLï¼ˆå¦‚ç»ˆç«¯ç›´æ¥è¿è¡Œ `python`ï¼‰ | è‡ªåŠ¨è°ƒç”¨ `repr()` æ˜¾ç¤ºè¡¨è¾¾å¼çš„å€¼ |
| VS Code / è„šæœ¬è¿è¡Œï¼ˆ`.py` æ–‡ä»¶ï¼‰             | **ä¸ä¼š**è‡ªåŠ¨è¾“å‡ºè¡¨è¾¾å¼ç»“æœï¼Œå¿…é¡»ä½¿ç”¨ `print()` |

---

## ğŸ’¬ ä¸¾ä¾‹è¯´æ˜

åœ¨ Python è§£é‡Šå™¨ä¸­ï¼š

```python
>>> 1 + 1
2
```
âœ… å°ç»“
â€¢	ğŸ–¥ VS Code / è„šæœ¬è¿è¡Œæ¨¡å¼ï¼šè¦ç”¨ print() æ‰èƒ½çœ‹åˆ°ç»“æœ
â€¢	ğŸ è§£é‡Šå™¨ / REPL æ¨¡å¼ï¼šå¯ä»¥çœç•¥ print()ï¼Œè‡ªåŠ¨å¸®ä½ å±•ç¤ºæœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„ç»“æœ


# ğŸ¯ `repr()` ä¸ `eval()` çš„â€œäº’é€†â€å…³ç³»ï¼š

- `repr(obj)` ç”Ÿæˆ**åˆæ³• Python å­—ç¬¦ä¸²**ï¼Œå¯è¢« `eval()` è¿˜åŸã€‚
- å¤šæ¬¡ `repr()` ä¼šä¸æ–­â€œåŒ…è£…â€å­—ç¬¦ä¸²ï¼ŒåŠ ä¸Šè½¬ä¹‰å­—ç¬¦ã€‚
- å¤šæ¬¡ `eval()` å°±åƒâ€œæ‹†å¥—å¨ƒâ€ï¼Œé€å±‚è¿˜åŸå‡ºåŸå§‹å¯¹è±¡ã€‚

### ğŸš« é”™è¯¯ç”¨æ³•ï¼š`eval(s)` ä¸æ€»æ˜¯åˆæ³•

- å¦‚æœ `s` æ˜¯ `"Hello, World"`ï¼ˆæ²¡æœ‰å¼•å·åŒ…ä½çš„å­—ç¬¦ä¸²ï¼‰ï¼Œå°±ä¸æ˜¯åˆæ³• Python è¡¨è¾¾å¼ã€‚
- æ‰€ä»¥ `eval(s)` ä¼šæŠ¥é”™ â€”â€” NameErrorã€‚

### ğŸ§ª ç¤ºä¾‹ï¼š
```python
s = "Hello, World"
repr(s)            # => "'Hello, World'"
eval(repr(s))      # => 'Hello, World'
repr(repr(repr(s)))  # => "'\\'\\'Hello, World\\'\\''"
eval(eval(eval(...)))  # æˆåŠŸè¿˜åŸåŸå§‹å­—ç¬¦ä¸²
```
ğŸ§  è®²è¿™ä¸ªçš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ
æ ¸å¿ƒæ€æƒ³ï¼šrepr() æ˜¯ä¸ºäº†ç”Ÿæˆä¸€ä¸ªåˆæ³•çš„ã€å¯ä»¥ç”¨ eval() è¿˜åŸå¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚

è€å¸ˆé€šè¿‡è¿™ä¸ªä¾‹å­è¦è¯´æ˜ï¼š
â€¢	repr() ä¸€æ¬¡ï¼Œæ˜¯æŠŠå¯¹è±¡ â†’ å­—ç¬¦ä¸²
â€¢	eval() ä¸€æ¬¡ï¼Œæ˜¯æŠŠå­—ç¬¦ä¸² â†’ å¯¹è±¡
â€¢	å¤šæ¬¡ repr()ï¼Œä½ å…¶å®æ˜¯æŠŠâ€œå­—ç¬¦ä¸²çš„å­—ç¬¦ä¸²çš„å­—ç¬¦ä¸²â€¦â€¦â€åŒ…è£…èµ·æ¥
â€¢	åªæœ‰ eval() å¯¹åº”â€œæ‹†åŒ…â€æ¬¡æ•°å¤Ÿå¤šï¼Œä½ æ‰èƒ½æœ€ç»ˆè¿˜åŸæœ€åˆçš„å¯¹è±¡


### F-stringè¡¨è¾¾å¼çš„å‰¯ä½œç”¨
åœ¨ f-string ä¸­ï¼ŒèŠ±æ‹¬å· {} ä¸­çš„è¡¨è¾¾å¼æ˜¯ä»å·¦å¾€å³ä¾æ¬¡æ±‚å€¼çš„ï¼š
```python
f'{expr1} {expr2} {expr3}'
```

- åœ¨ f-string ä¸­ï¼ŒèŠ±æ‹¬å· `{}` ä¸­çš„æ¯ä¸ªè¡¨è¾¾å¼éƒ½ä¼šè¢«æ±‚å€¼ã€‚
- å¦‚æœè¡¨è¾¾å¼æœ¬èº«å…·æœ‰å‰¯ä½œç”¨ï¼ˆå¦‚ list.pop() ä¼šæ”¹å˜åˆ—è¡¨ï¼‰ï¼Œé‚£ä¹ˆä¼šå½±å“åç»­è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœã€‚

### ğŸ§ª ç¤ºä¾‹ï¼š

```python
s = [9, 8, 7]
f"Result: {s.pop()} {s.pop()} {s}"  # -> 'Result: 7 8 [9]'
```


# ğŸ“Œ Python å¤šæ€å‡½æ•°ä¸åŒä¸‹åˆ’çº¿æ–¹æ³•ï¼ˆMagic Methodsï¼‰

## âœ… ä»€ä¹ˆæ˜¯ Polymorphic Functionï¼Ÿ

- å¤šæ€å‡½æ•°æ˜¯æŒ‡èƒ½ä½œç”¨äºå¤šç§ä¸åŒç±»å‹å¯¹è±¡çš„å‡½æ•°ã€‚
- Python ä¸­ `str()` å’Œ `repr()` å°±æ˜¯å…¸å‹ä¾‹å­ã€‚

**å¤šæ€å‡½æ•°ï¼ˆPolymorphic Functionï¼‰** å¹¶ä¸æ˜¯æŸä¸€ç§ç‰¹å®šçš„å‡½æ•°ï¼Œè€Œæ˜¯ï¼š
> ä¸€ç±»å¯ä»¥ä½œç”¨äºä¸åŒç±»å‹å¯¹è±¡ï¼Œå¹¶æ ¹æ®å¯¹è±¡ç±»å‹è¡¨ç°å‡ºä¸åŒè¡Œä¸ºçš„å‡½æ•°ã€‚
### ğŸŒŸ ä¸¾ä¾‹è¯´æ˜

```python
str(123)          # è¾“å‡º: '123' ï¼ˆæ•´æ•°ï¼‰
str(3.14)         # è¾“å‡º: '3.14' ï¼ˆæµ®ç‚¹æ•°ï¼‰
str([1, 2, 3])    # è¾“å‡º: '[1, 2, 3]' ï¼ˆåˆ—è¡¨ï¼‰
str({'a': 1})     # è¾“å‡º: "{'a': 1}" ï¼ˆå­—å…¸ï¼‰
```

## ğŸ¯ str() å’Œ repr() çš„æœ¬è´¨

| å‡½æ•°è°ƒç”¨     | å®é™…æ–¹æ³•è°ƒç”¨      |
|--------------|-------------------|
| `str(obj)`   | `obj.__str__()`   |
| `repr(obj)`  | `obj.__repr__()`  |

---

## ğŸ“Œ åŒä¸‹åˆ’çº¿æ–¹æ³•çš„å¸¸è§ä¾‹å­ï¼ˆMagic Methodsï¼‰

| æ–¹æ³•å       | å¯¹åº”åŠŸèƒ½                                     |
|--------------|----------------------------------------------|
| `__str__()`  | å­—ç¬¦ä¸²è¡¨ç°ï¼Œç”¨äºäººç±»é˜…è¯»                      |
| `__repr__()` | å¼€å‘è€…è°ƒè¯•ç”¨ï¼Œå¯è¢« `eval` è§£æ               |
| `__len__()`  | å®ç° `len(obj)`                              |
| `__add__()`  | å®ç° `a + b` è¿ç®—                            |
| `__eq__()`   | å®ç° `a == b` åˆ¤æ–­                           |
| `__bool__()` | å®ç° `bool(obj)`ï¼Œå°†å¯¹è±¡è½¬æ¢ä¸º True æˆ– False |
| `__float__()`| å®ç° `float(obj)`ï¼Œå°†å¯¹è±¡è½¬æ¢ä¸ºæµ®ç‚¹æ•°        |

---

## ğŸ§ª ç¤ºä¾‹

```python
from fractions import Fraction

half = Fraction(1, 2)

print(str(half))        # 1/2
print(repr(half))       # Fraction(1, 2)

# ç­‰ä»·äºï¼š
print(half.__str__())   # 1/2
print(half.__repr__())  # Fraction(1, 2
```


# ğŸ Python å¤šæ€å‡½æ•°ä¸ `self` å‚æ•°ä½¿ç”¨ç¬”è®°

## âœ… ä»€ä¹ˆæ˜¯ `self`ï¼Ÿ
- `self` æ˜¯ç±»ä¸­å®ä¾‹æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ**ä»£è¡¨å½“å‰å¯¹è±¡è‡ªèº«**ã€‚
- å½“ä½ é€šè¿‡å¯¹è±¡è°ƒç”¨æ–¹æ³•æ—¶ï¼ŒPython ä¼šè‡ªåŠ¨æŠŠè¯¥å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ ç»™æ–¹æ³•ã€‚
- å°½ç®¡å¯ä»¥ä½¿ç”¨åˆ«çš„åå­—ï¼ˆæ¯”å¦‚ `this`ï¼‰ï¼Œä½† **Python ç¤¾åŒºä¹ æƒ¯ç”¨ `self`**ã€‚

---

## ğŸŒŸ å“ªäº›æƒ…å†µéœ€è¦ `self`ï¼Ÿ
- **ç±»çš„å®ä¾‹æ–¹æ³•**ä¸­å®šä¹‰æ—¶å¿…é¡»æœ‰ `self`ï¼Œå› ä¸ºè¿™äº›æ–¹æ³•è¦è®¿é—®å¯¹è±¡çš„å±æ€§æˆ–å…¶ä»–æ–¹æ³•ã€‚

```python
class Dog:
    def __init__(self, name):
        self.name = name

    def bark(self):
        print(f"{self.name} says woof!")
d = Dog("Fido")
d.bark()  # è¾“å‡º: Fido says woof!
```
## ğŸš« å“ªäº›æƒ…å†µä¸éœ€è¦ selfï¼Ÿ
ç±»å‹      æ˜¯å¦éœ€è¦ self      è¯´æ˜
å®ä¾‹æ–¹æ³•   âœ… æ˜¯             æ“ä½œå¯¹è±¡è‡ªèº«çš„æ•°æ®
é™æ€æ–¹æ³•   âŒ å¦             ç±»ä¸­å®šä¹‰ä½†ä¸è®¿é—®å¯¹è±¡/ç±»æ•°æ®ï¼Œåƒæ™®é€šå‡½æ•°
ç±»æ–¹æ³•ï¼ˆ@classmethodï¼‰âŒï¼ˆä½¿ç”¨ clsï¼‰æ“ä½œç±»æœ¬èº«ï¼Œè€Œéå®ä¾‹å¯¹è±¡

```python
class MathTool:
    @staticmethod
    def add(x, y):
        return x + y

    @classmethod
    def description(cls):
        return f"This is {cls.__name__}"
```

## ğŸ¯ self çš„ä½¿ç”¨æ€»ç»“

| ä½¿ç”¨ä½ç½®     | æ˜¯å¦å†™ `self` | åŸå› è¯´æ˜                                 |
|--------------|-------------|------------------------------------------|
| æ–¹æ³•å®šä¹‰æ—¶   | âœ… å¿…é¡»å†™ä¸Š     | å‘Šè¯‰ Python è¿™ä¸ªæ–¹æ³•ç»‘å®šåˆ°å¯¹è±¡           |
| æ–¹æ³•è°ƒç”¨æ—¶   | âŒ ä¸éœ€è¦       | Python ä¼šè‡ªåŠ¨æŠŠå¯¹è±¡ä½œä¸º `self` ä¼ å…¥       |

## ğŸ“Œ self æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ
```python
class A:
    def show(self):
        print("Hi")

a = A()
a.show()         # è‡ªåŠ¨è½¬ä¸º A.show(a)
A.show(a)        # ç­‰æ•ˆå†™æ³•
```
## ğŸ“š é¢å¤–æç¤º
__init__ æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿå¿…é¡»æ˜¯ selfã€‚!!!
self å¯ä»¥ç”¨æ¥åŠ¨æ€æ·»åŠ å±æ€§ï¼šself.age = 20


# ğŸ§  Implementing repr and str

â¸»

## ğŸ“Œ repr çš„è¡Œä¸ºï¼ˆBehavior of reprï¼‰

repr(x) çš„è¡Œä¸ºæ¯”ç›´æ¥è°ƒç”¨ x.__repr__() æ›´å¤æ‚ã€‚

	â€¢	âœ… å®ä¾‹ä¸Šçš„ __repr__ å±æ€§ä¼šè¢«å¿½ç•¥ã€‚
	â€¢	âœ… Python åªæŸ¥æ‰¾ç±»å±æ€§ï¼ˆclass attributeï¼‰é‡Œçš„ __repr__ æ–¹æ³•ã€‚

â“å¦‚ä½•æ¨¡æ‹Ÿ repr(x) çš„å†…éƒ¨è¡Œä¸ºï¼Ÿ

ä»¥ä¸‹æ˜¯å‡ ç§å®ç°æ–¹å¼çš„å¯¹æ¯”ï¼š

æ ‡è®°	å®ç°æ–¹å¼	æ˜¯å¦æ­£ç¡®	è¯´æ˜
ğŸ‘†	def repr(x): return x.__repr__(x)	âŒ	å¤šä¼ äº†ä¸€ä¸ªå‚æ•°ï¼Œ__repr__ åªæ¥å—ä¸€ä¸ª self å‚æ•°
âœŒï¸	def repr(x): return x.__repr__()	âš ï¸	æœ‰å¯èƒ½è°ƒç”¨çš„æ˜¯å®ä¾‹å±æ€§ï¼Œè€Œä¸æ˜¯ç±»å±æ€§
âœ…	def repr(x): return type(x).__repr__(x)	âœ…	å®Œæ•´æ¨¡æ‹Ÿ Python è¡Œä¸ºï¼Œä»ç±»å±æ€§ä¸­æŸ¥æ‰¾å¹¶ä¼ å…¥å®ä¾‹
âœ‹	def repr(x): return type(x).__repr__()	âŒ	ç¼ºå°‘å‚æ•°ï¼Œç±»æ–¹æ³•éœ€è¦ä¼ å…¥å®ä¾‹
ğŸ–	def repr(x): return super(x).__repr__()	âŒ	é”™è¯¯è¯­ä¹‰ï¼Œsuper(x) åªèƒ½åœ¨ç±»å®šä¹‰å†…éƒ¨ä½¿ç”¨


â¸»

## ğŸ“Œ str çš„è¡Œä¸ºï¼ˆBehavior of strï¼‰

str(x) çš„è¡Œä¸ºç±»ä¼¼ä½†ç•¥æœ‰ä¸åŒï¼š

	â€¢	âœ… ä¹Ÿä¼š å¿½ç•¥å®ä¾‹ä¸Šçš„ __str__ å±æ€§
	â€¢	âœ… å¦‚æœ æ²¡æœ‰å®šä¹‰ __str__ï¼Œä¼šé€€è€Œè°ƒç”¨ repr(x)

â¸»

ğŸ“ æ€»ç»“ Summaryï¼ˆä¸­è‹±å¯¹ç…§ï¼‰

å‡½æ•°è¡Œä¸º	è‹±æ–‡è§£é‡Š	ä¸­æ–‡è§£é‡Š
repr(x)	Only looks for __repr__ on class, not on instance	åªæŸ¥ç±»çš„ __repr__ï¼Œå¿½ç•¥å®ä¾‹ç»‘å®šçš„ __repr__ æ–¹æ³•
str(x)	Same as repr(x) if no __str__ is defined	å¦‚æœç±»æ²¡æœ‰ __str__ï¼Œå°±å›é€€ä½¿ç”¨ repr(x) çš„ç»“æœ
å®ç° repr(x)	type(x).__repr__(x)	æ­£ç¡®æ¨¡æ‹Ÿæ–¹å¼æ˜¯ä»ç±»ä¸­æŸ¥æ‰¾å¹¶è°ƒç”¨ï¼Œä¼ å…¥å®ä¾‹æœ¬èº«ä¸ºå‚æ•°


â¸»

ğŸ§‘â€ğŸ« æ¨èç”¨æ³•ï¼šæ°¸è¿œç”¨ type(x).__repr__(x) æ¥å®ç°è‡ªå·±çš„ repr()ï¼Œç¡®ä¿è¡Œä¸ºå’Œ Python å†…éƒ¨ä¸€è‡´ã€‚

# ğŸ§  ä»€ä¹ˆæ˜¯æ¥å£ï¼ˆInterfaceï¼‰?

è‹±æ–‡å®šä¹‰ï¼š
An interface is a set of methods that a class agrees to implement so that it can interact with other parts of the code in a predictable way.

ä¸­æ–‡è§£é‡Šï¼š
æ¥å£æ˜¯ç±»ä¸­çº¦å®šè¦å®ç°çš„ä¸€ç»„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•è®©å¯¹è±¡åœ¨å’Œå…¶ä»–ä»£ç äº¤äº’æ—¶å…·æœ‰ä¸€è‡´æ€§å’Œå¯æ›¿ä»£æ€§ã€‚

## æ¥å£çš„æœ¬è´¨ä¸æ˜¯è¯­æ³•ï¼Œè€Œæ˜¯ä¸€ç§ çº¦å®šã€‚åªè¦ç±»å®ç°äº†æŸäº›ç‰¹æ®Šåå­—çš„æ–¹æ³•ï¼ˆåƒ __str__, __repr__ï¼‰ï¼ŒPython å†…ç½®å‡½æ•°å°±çŸ¥é“è¯¥æ€ä¹ˆå¤„ç†è¿™ä¸ªå¯¹è±¡ï¼š
	â€¢	str(obj) âœ è‡ªåŠ¨è°ƒç”¨ obj.__str__()
	â€¢	repr(obj) âœ è‡ªåŠ¨è°ƒç”¨ obj.__repr__()

ä½ åªè¦â€œéµå®ˆçº¦å®šâ€å»å®ç°è¿™äº›æ–¹æ³•ï¼ŒPython å°±ä¼šåœ¨é€‚å½“çš„æ—¶å€™è‡ªåŠ¨è°ƒç”¨å®ƒä»¬ï¼Œè¿™å°±å½¢æˆäº†ä¸€ä¸ªâ€œæ¥å£â€ã€‚



# ğŸ§® Python Ratio ç±»è¯¦è§£ç¬”è®°

æœ¬ç¬”è®°æ ¹æ®ä¼¯å…‹åˆ© CS61A è¯¾ç¨‹ä¸­çš„ Ratio ç±»ç¤ºä¾‹ï¼Œç»“åˆæˆªå›¾å†…å®¹è¿›è¡Œè®²è§£ï¼Œç‰¹åˆ«èšç„¦åœ¨ä¸¤ä¸ªé‡è¦ç­–ç•¥ï¼šç±»å‹åˆ†æ´¾ï¼ˆType Dispatchingï¼‰å’Œ ç±»å‹å¼ºåˆ¶è½¬æ¢ï¼ˆType Coercionï¼‰ã€‚

â¸»

ğŸ“Œ ä»£ç ç¤ºä¾‹ï¼šRatio ç±»
```python
class Ratio:
    def __init__(self, n, d):
        self.number = n
        self.denom = d

    def __repr__(self):
        return 'Ratio({0}, {1})'.format(self.number, self.denom)

    def __str__(self):
        return '{0}/{1}'.format(self.number, self.denom)

    def __add__(self, other):
        if isinstance(other, int):
            n = self.number + self.denom * other
            d = self.denom
        elif isinstance(other, Ratio):
            n = self.number * other.denom + self.denom * other.number
            d = self.denom * other.denom
        elif isinstance(other, float):
            return float(self) + other
        g = gcd(n, d)
        return Ratio(n // g, d // g)

    __radd__ = __add__

    def __float__(self):
        return self.number / self.denom


def gcd(n, d):
    while n != d:
        n, d = min(n, d), abs(n - d)
    return n

```
â¸»

ğŸ¯ è®¾è®¡ç›®çš„ï¼šå…¼å®¹å¤šç§åŠ æ³•æ“ä½œ

é€šè¿‡é‡è½½ __add__ å’Œ __float__ æ–¹æ³•ï¼ŒRatio ç±»å¯ä»¥å®ç°ä¸ä»¥ä¸‹ç±»å‹çš„ç›¸åŠ ï¼š
	â€¢	int
	â€¢	float
	â€¢	Ratio

è¿˜å¯ä»¥æ”¯æŒå·¦æ“ä½œæ•°ä¸æ˜¯ Ratio çš„æƒ…å†µï¼ˆå¦‚ 0.2 + Ratio(...)ï¼‰

â¸»

ğŸ”· ä¸€ã€ç±»å‹åˆ†æ´¾ï¼ˆType Dispatchingï¼‰

âœ… å«ä¹‰ï¼š

æ ¹æ®å‚æ•° other çš„ç±»å‹ï¼Œé‡‡ç”¨ä¸åŒçš„å¤„ç†é€»è¾‘ã€‚

âœ… åº”ç”¨ç¤ºä¾‹ï¼š

if isinstance(other, int):
    ...
elif isinstance(other, Ratio):
    ...
elif isinstance(other, float):
    ...

âœ… ä½œç”¨ï¼š

æ”¯æŒä¸ä¸åŒç±»å‹çš„å¯¹è±¡è¿›è¡ŒåŠ æ³•æ“ä½œï¼Œé¿å…æŠ¥é”™æˆ–é€»è¾‘æ··ä¹±ã€‚

â¸»

ğŸ”· äºŒã€ç±»å‹å¼ºåˆ¶è½¬æ¢ï¼ˆType Coercionï¼‰

âœ… å«ä¹‰ï¼š

å°†å½“å‰å¯¹è±¡è½¬æ¢æˆå¦ä¸€ç§ç±»å‹ï¼Œä»¥ä¾¿ä¸è¯¥ç±»å‹å…¼å®¹æ“ä½œã€‚

âœ… åº”ç”¨ç¤ºä¾‹ï¼š

elif isinstance(other, float):
    return float(self) + other

def __float__(self):
    return self.number / self.denom

âœ… ä½œç”¨ï¼š

æ”¯æŒ Ratio + float æˆ– float + Ratioï¼Œè‡ªåŠ¨è½¬æ¢æˆ float è¿ç®—ã€‚

â¸»

ğŸ” ä¸‰ã€åå‘åŠ æ³•æ“ä½œï¼ˆ__radd__ï¼‰

âœ… å«ä¹‰ï¼š

å½“ Ratio å‡ºç°åœ¨å³è¾¹ï¼ˆå¦‚ 0.2 + Ratio(...)ï¼‰æ—¶ï¼ŒPython ä¼šå°è¯•è°ƒç”¨ Ratio.__radd__ã€‚

âœ… å®ç°æ–¹å¼ï¼š

__radd__ = __add__

âœ… ä½œç”¨ï¼š

å®ç°åŠ æ³•æ“ä½œçš„å·¦å³å¯¹ç§°æ€§ï¼Œæé«˜ç±»çš„çµæ´»æ€§ã€‚

â¸»

ğŸ§  æ€»ç»“å¯¹æ¯”è¡¨

ç­–ç•¥	å«ä¹‰	ä¾‹å­	ç›®çš„
ç±»å‹åˆ†æ´¾	æ ¹æ®ç±»å‹å†³å®šæ‰§è¡Œé€»è¾‘	if isinstance(other, int)	æ”¯æŒå¤šç§ç±»å‹æ“ä½œ
ç±»å‹å¼ºåˆ¶è½¬æ¢	ä¸»åŠ¨è½¬æ¢æˆå¦ä¸€ç§ç±»å‹	float(self)	å…¼å®¹ float ç­‰å†…å»ºç±»å‹
åå‘æ“ä½œæ”¯æŒ	æ”¯æŒ float + Ratio	__radd__ = __add__	ä¿è¯æ“ä½œé¡ºåºä¸å½±å“æ­£ç¡®æ€§


â¸»

ğŸ“š å»¶ä¼¸é˜…è¯»
	â€¢	Python å®˜æ–¹æ–‡æ¡£ï¼š
	â€¢	æ•°æ®æ¨¡å‹ï¼ˆå«ç‰¹æ®Šæ–¹æ³•ï¼‰
	â€¢	ç›¸å…³é­”æœ¯æ–¹æ³•ï¼š
	â€¢	__add__()ã€__radd__()ã€__float__()ã€__str__()ã€__repr__()